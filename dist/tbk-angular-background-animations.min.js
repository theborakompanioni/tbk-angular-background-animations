!function(t){t.module("tbkBackgroundAnimations.config",[]).value("tbkBackgroundAnimations.config",{debug:!0}),t.module("tbkBackgroundAnimations.directives",[]),t.module("tbkBackgroundAnimations.services",[]),t.module("tbkBackgroundAnimations.core",["tbkBackgroundAnimations.config","tbkBackgroundAnimations.directives","tbkBackgroundAnimations.services"]),t.module("tbkBackgroundAnimations.animations",["tbkBackgroundAnimations.core"]),t.module("tbkBackgroundAnimations",["tbkBackgroundAnimations.core","tbkBackgroundAnimations.animations"])}(angular),angular.module("tbkBackgroundAnimations.services").factory("tbkAnimationFrame",["$window",function(t){"use strict";var n=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(n){t.setTimeout(n,1e3/60)}}(),i=function(){return t.cancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.clearTimeout}();return{request:function(i){return n.call(t,i)},cancel:function(n){return i.call(t,n)}}}]),function(t){"use strict";t.module("tbkBackgroundAnimations.animations.ParticleGravity",["tbkBackgroundAnimations.animations"]).factory("tbkParticleGravityAnimationService",["tbkAnimationFrame",function(t){return function(n,i){function a(){m.fillStyle=l.backgroundColor,m.fillRect(0,0,d,k)}function e(){this.x=Math.random()*d,this.y=Math.random()*k,this.vx=-1+2*Math.random(),this.vy=-1+2*Math.random(),this.radius=l.particleSize,this.draw=function(){m.fillStyle=l.particleColor,m.beginPath(),m.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),m.fill()}}function o(){a();for(var t=0,n=h.length;n>t;t++)h[t].draw();r()}function r(){for(var t=l.minDistance,n=0,i=h.length;i>n;n++){var a=h[n];a.x+=a.vx,a.y+=a.vy,a.x+a.radius>d?a.x=a.radius:a.x-a.radius<0&&(a.x=d-a.radius),a.y+a.radius>k?a.y=a.radius:a.y-a.radius<0&&(a.y=k-a.radius);for(var e=n+1;i>e;e++){var o=h[e],r=s(a,o);t>=r&&(u(a,o,r/t),c(a,o,l.accelerate))}}}function c(t,n,i){var a=t.x-n.x,e=t.y-n.y,o=a*i,r=e*i;t.vx-=o,t.vy-=r,n.vx+=o,n.vy+=r}function u(t,n,i){m.beginPath(),m.strokeStyle="rgba(255,255,255,"+(1.2-i)+")",m.moveTo(t.x,t.y),m.lineTo(n.x,n.y),m.stroke(),m.closePath()}function s(t,n){var i=t.x-n.x,a=t.y-n.y;return Math.sqrt(i*i+a*a)}var l=i||{};l.backgroundColor||(l.backgroundColor="rgba(0,0,0,1)"),l.particleColor||(l.particleColor="white"),l.particleSize||(l.particleSize=3),l.particleCount||(l.particleCount=13),l.minDistance||(l.minDistance=100),l.accelerate||(l.accelerate=1/3e3);for(var m=n.getContext("2d"),d=n.width,k=n.height,h=[],g=0,f=l.particleCount;f>g;g++)h.push(new e);var v;return function b(){o(),v=t.request(b)}(),function(){t.cancel(v)}}}]).directive("tbkParticleGravityAnimation",["tbkParticleGravityAnimationService",function(n){return{scope:{width:"@",height:"@",style:"=?",options:"=?"},template:"<canvas></canvas>",controller:[function(){}],compile:function(i){var a=i.children()[0];return function(i){i.options=i.options||{},i.style=i.style||[],a.width=i.width||a.width,a.height=i.height||a.height;var e=t.element(a);t.forEach(i.style,function(t,n){e.css(n,t)});var o=Math.round(a.width*a.height/6e3),r=Math.max(50,o),c=n(a,{backgroundColor:i.options.backgroundColor||"#3d4a57",particleColor:i.options.particleColor||"#aaa",particleCount:i.options.particleCount||r,particleSize:i.options.particleSize||2,minDistance:i.options.minDistance||77,accelerate:i.options.accelerate||1/6e3});i.$on("$destroy",function(){c()})}}}}])}(angular);